<!DOCTYPE html>
<html>
<head>
    <title>GameSource</title>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="import" href="includes/head.html">
</head>
<body>
    <div class="row">
        <div class="col-xs-11">
            <div class="text-right">
                <a class="btn btn-primary btn-sm" href="account/login.aspx" role="button">Login</a>
            </div>
        </div>
    </div>
            <div class="container">
                <h1>GameSource <small>by Oakmont Industries</small></h1>
                <h3>Search</h3>
                <form id="search">
                    <div class="form-group">
                        <label for="search">Name</label>
                        <input type="text" class="form-control" id="nameSearch" placeholder="Search for a game ...">
                    </div>
                    <input type="button" class="btn btn-primary" id="btnSearch" value="Search">
                </form>
            </div>

            <div class="container" id="games">
            </div>

            <script>
                $(document).ready(function () {
                    var d = "<h1>Games</h1>";
                    service("getGames", "{}",
                        function (response) {
                            $.each(response, function (index, value) {
                                d += "<a href='" + value.GamePage + "' class='list-group-item'><img src=\"" + value.ImgLink + "\"class='img-thumbnail' style='width:6%'>" +
                                    "<h4 class='list-group-item-heading'>" + value.Name + "</h4>" +
                                    "<p class='list-group-item-text'><b>Description:</b><br />" +
                                    value.Description + "<br />&copy" + value.ReleaseDate + " " + value.Publisher + "</p></a>";
                            });
                            $("#games").html(d);
                        }, function (response) {
                            alert("Error...");
                            console.log(response);
                        });
                });

                $('#search').keypress(function (e) {
                    if (e.keyCode == 13)
                        $('#btnSubmit').click();
                });

                $("#btnSearch").click(function () {
                    var d = "<h1>Games</h1>";
                    service("getGameByName", "{gameName:'" + $("#nameSearch").val() + "'}",
                        function (response) {
                            $.each(response, function (index, value) {
                                d += "<a href='" + value.GamePage + "' class='list-group-item'><img src=\"" + value.ImgLink + "\"class='img-thumbnail' style='width:6%'>" +
                                    "<h4 class='list-group-item-heading'>" + value.Name + "</h4>" +
                                    "<p class='list-group-item-text'><b>Description:</b><br />" +
                                    value.Description + "<br />&copy" + value.ReleaseDate + " " + value.Publisher + "</p></a>";
                            });
                            $("#games").html(d);
                        }, function (response) {
                            alert("Error...");
                            console.log(response);
                        });
                });

            </script>
            <div class="footer">
                <p><br /><br /><br />&copy2019 Oakmont Industries</p>
                <p align="center">Don't see a game you want? Submit a request <a href="SubmitForm.html">here</a></p>
            </div>
</body>
</html>
